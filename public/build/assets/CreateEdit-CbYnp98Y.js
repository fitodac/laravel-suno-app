import{r as o,W as N,j as s,a as v,B as u}from"./app-Xg3MWjUp.js";import{L as y}from"./Layout-Da2PjEPE.js";import{t}from"./translations-CBxNckOR.js";import{P as w}from"./PageHeader-B53fTZgU.js";import{P as R}from"./index-BBhGX0Qn.js";import{C as D}from"./index-Bf0lN5A-.js";import"./RolesList-QOkBLjws.js";import{DeleteRole as E}from"./DeleteRole-DVpalNuz.js";import{c as S,a as C}from"./chunk-H4VOEXHF-BKPwUzkW.js";import{c as P}from"./chunk-6EHM2IL6-CI5cLZtA.js";import{c as _}from"./chunk-KBN3H6OQ-qxOJiocu.js";import{b as h}from"./chunk-DBLREEYE-kXYMn-PH.js";import"./useColorMode-BDGS6CE1.js";import"./chunk-3XVMTUU7-Dp_cF4cz.js";import"./extend-tailwind-merge-DDA0jNcl.js";import"./chunk-VMWQTXAV-DD6Evupf.js";import"./chunk-XHQUSKIE-BJ4pqTDI.js";import"./chunk-N2KXC5ZE-s7KBEtmC.js";import"./chunk-CIZQCQPA-C7Ey7jFP.js";import"./index-0WiR-nh7.js";import"./useToggleState-B8OVgiR9.js";import"./focusSafely-BGz0Gc4B.js";import"./useFocusable-DL-dGcJ1.js";import"./useSyncRef-BzsjkglV.js";import"./useFocus-nnqdAYxR.js";import"./usePress-D8L0wOwc.js";import"./textSelection-CcPLNbaN.js";import"./context-CiZxFy97.js";import"./VisuallyHidden-DUDGVDCO.js";import"./template.executive.config-JRgdiSJO.js";import"./chunk-44JHHBS2-BLNJPhDT.js";import"./layout-jxVw8Mvo.js";import"./useDialog-B9TXiXAz.js";import"./useLabels-C083MLIf.js";import"./isScrollable-BprAQSS1.js";import"./FocusScope-B94nuPOP.js";import"./chunk-6NL67ZRH-C6QNaIJW.js";import"./useOverlayTriggerState-CA95d7cI.js";import"./useMenuTriggerState-BXbxTzHL.js";import"./Item-CbXxQ6F7.js";import"./getChildNodes-D9Y5kHi7.js";import"./chunk-WQVQ7P2I-D88hI9ES.js";import"./chunk-2GZPFWUB-DujZQCQ1.js";import"./chunk-QXREVWCS-Bcc_oW-g.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./index-vhBEzfuR.js";import"./chunk-NQM3AZQR-DA4sNDJM.js";import"./useField-DZWb07f-.js";import"./useLabel-iYy-tCn_.js";import"./useFormValidationState-DKcVms6Q.js";import"./chunk-4WFLSIHH-pHsL0tlp.js";import"./chunk-M3MASYO7-CHsWdAdY.js";import"./chunk-YRZGWF2W-DLIyo9wq.js";import"./getScrollParent-BcD73RX6.js";import"./chunk-7F3ZLNJ6-BDbQD4Kz.js";import"./chunk-MRXO6UUP-xsy37Bta.js";import"./index-DsrA4Nwf.js";import"./index-BKmmPl89.js";import"./chunk-P2T5LMDM-DNaWNLoN.js";const L=({role:r,permissions:l,protected_roles:m})=>{const x=o.useRef((r&&(m==null?void 0:m.includes(r.name)))??!1),c=o.useRef(null),{data:n,setData:p,post:f,patch:g,processing:i,errors:d,clearErrors:j}=N({name:"",permissions:[]});o.useEffect(()=>{var a;(a=c.current)==null||a.focus()},[]),o.useEffect(()=>{r&&p({name:r.name,permissions:r.permissions.map(a=>a.name)})},[r]);const b=a=>{a.preventDefault(),r?g(route("dashboard.role.update",{role:r}),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)}):f(route("dashboard.role.store"),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)})};return s.jsxs(s.Fragment,{children:[s.jsx(w,{title:r?t("Role"):t("New Role")}),s.jsxs(R,{children:[s.jsx("div",{className:"max-w-md space-y-10 lg:max-w-3xl",children:s.jsxs("div",{className:"grid gap-x-6 gap-y-10 lg:grid-cols-2 lg:gap-x-16",children:[s.jsxs("div",{className:"w-52 space-y-6 lg:order-2",children:[s.jsx(S,{className:"bg-content4 mt-5 min-h-20",shadow:"none",radius:"md",children:s.jsx(C,{children:s.jsx("div",{className:"text-foreground-800 space-y-2",children:r?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-right",children:"Total users with this role"}),s.jsx("p",{className:"text-4xl font-light tracking-tighter text-right",children:r.users_count})]}):s.jsx("p",{className:"text-sm",children:t("Dere are no users with this role")})})})}),r&&s.jsx(E,{role:r})]}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsx("fieldset",{children:s.jsx(D,{isRequired:!0,ref:c,variant:"faded",value:n.name,label:t("Role name"),isInvalid:!!d.name,errorMessage:d.name,onKeyUp:()=>j("name"),isDisabled:x.current||i,onValueChange:a=>p("name",a)})}),s.jsx("fieldset",{className:"space-y-6",children:Object.keys(l).map(a=>s.jsx("div",{children:s.jsx(P,{label:`${a} ${t("guards")}`,size:"sm",value:n.permissions,isDisabled:i,onValueChange:e=>{p("permissions",e)},classNames:{label:"text-foreground text-sm font-medium capitalize"},children:l[a].map(e=>s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(_,{value:e.name,className:"py-3",children:e.name},e.name)},e.name))})},a))}),s.jsxs("div",{className:"flex gap-5 pt-4",children:[s.jsx(h,{type:"button",as:v,isDisabled:i,href:route("dashboard.roles.list"),className:"w-32",children:t("Cancel")}),s.jsx(h,{type:"submit",color:"primary",className:"w-32",isLoading:i,children:t("Save")})]})]})]})}),s.jsx("div",{className:"h-10"})]}),s.jsx("div",{className:"h-20"})]})};L.layout=r=>s.jsx(y,{children:r,pageTitle:String(t("Roles"))});export{L as Page,L as default};
