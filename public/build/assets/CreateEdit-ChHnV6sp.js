import{r as o,W as N,j as s,a as v,B as u}from"./app-BL5MU1ub.js";import{L as y}from"./Layout-VW-T7cWC.js";import{t}from"./translations-gWKnqGb7.js";import{P as w}from"./PageHeader-DQJoiO78.js";import{P as R}from"./index-CkAPsS__.js";import{C as D}from"./index-BDdcsGcF.js";import"./RolesList-DqB02Pv3.js";import{DeleteRole as E}from"./DeleteRole-CsIpGn-g.js";import{c as S,a as C}from"./chunk-H4VOEXHF-CE6FLewI.js";import{c as P}from"./chunk-6EHM2IL6-CqJ6WQ_Y.js";import{c as _}from"./chunk-KBN3H6OQ-CdYQgtAc.js";import{b as h}from"./chunk-DBLREEYE-k5beFU79.js";import"./useColorMode-BEg4eCOE.js";import"./chunk-3XVMTUU7-Dp_cF4cz.js";import"./extend-tailwind-merge-DDA0jNcl.js";import"./chunk-VMWQTXAV-CmOJJGNI.js";import"./chunk-XHQUSKIE-D4as8MM8.js";import"./usePress-CYqZ7Kvo.js";import"./focusSafely-C6wh2g3D.js";import"./VisuallyHidden-8nf4bjXZ.js";import"./useFormValidationState-GSGWOKt_.js";import"./index-BKyyixf6.js";import"./useToggleState-dObIv4S-.js";import"./template.executive.config-JRgdiSJO.js";import"./chunk-44JHHBS2-BriGgij3.js";import"./Item-vlEXo0Zk.js";import"./FocusScope-Bl5fcGfa.js";import"./getChildNodes-BuxFdcox.js";import"./useDialog-BTerbq__.js";import"./useLabels-D90GRlDd.js";import"./chunk-6NL67ZRH-Bv4xzwpt.js";import"./chunk-QXREVWCS-C6-bBqo7.js";import"./index-Cijx77Os.js";import"./chunk-NQM3AZQR-LXh0D-Rm.js";import"./chunk-4WFLSIHH-BDTj5-KF.js";import"./chunk-M3MASYO7-BWQptIre.js";import"./chunk-YRZGWF2W-BKOyv4sP.js";import"./getScrollParent-Ct0IpEud.js";import"./chunk-MRXO6UUP-DPGSvT7U.js";import"./index-CSy45WJ8.js";import"./index-CsO-F6Sj.js";import"./chunk-P2T5LMDM-BpxBeVed.js";const L=({role:a,permissions:c,protected_roles:m})=>{const x=o.useRef((a&&(m==null?void 0:m.includes(a.name)))??!1),n=o.useRef(null),{data:p,setData:l,post:f,patch:g,processing:i,errors:d,clearErrors:j}=N({name:"",permissions:[]});o.useEffect(()=>{var r;(r=n.current)==null||r.focus()},[]),o.useEffect(()=>{a&&l({name:a.name,permissions:a.permissions.map(r=>r.name)})},[a]);const b=r=>{r.preventDefault(),a?g(route("dashboard.role.update",{role:a}),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)}):f(route("dashboard.role.store"),{preserveScroll:!0,onSuccess:e=>{e.props.flash&&e.props.flash.success&&u.success(t(e.props.flash.success))},onError:e=>console.log(e)})};return s.jsxs(s.Fragment,{children:[s.jsx(w,{title:a?t("Role"):t("New Role")}),s.jsxs(R,{children:[s.jsx("div",{className:"max-w-md space-y-10 lg:max-w-3xl",children:s.jsxs("div",{className:"grid gap-x-6 gap-y-10 lg:grid-cols-2 lg:gap-x-16",children:[s.jsxs("div",{className:"w-52 space-y-6 lg:order-2",children:[s.jsx(S,{className:"bg-content4 mt-5 min-h-20",shadow:"none",radius:"md",children:s.jsx(C,{children:s.jsx("div",{className:"text-foreground-800 space-y-2",children:a?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-right",children:"Total users with this role"}),s.jsx("p",{className:"text-4xl font-light tracking-tighter text-right",children:a.users_count})]}):s.jsx("p",{className:"text-sm",children:t("Dere are no users with this role")})})})}),a&&s.jsx(E,{role:a})]}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsx("fieldset",{children:s.jsx(D,{isRequired:!0,ref:n,variant:"faded",value:p.name,label:t("Role name"),isInvalid:!!d.name,errorMessage:d.name,onKeyUp:()=>j("name"),isDisabled:x.current||i,onValueChange:r=>l("name",r)})}),s.jsx("fieldset",{className:"space-y-6",children:Object.keys(c).map(r=>s.jsx("div",{children:s.jsx(P,{label:`${r} ${t("guards")}`,size:"sm",value:p.permissions,isDisabled:i,onValueChange:e=>{l("permissions",e)},classNames:{label:"text-foreground text-sm font-medium capitalize"},children:c[r].map(e=>s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(_,{value:e.name,className:"py-3",children:e.name},e.name)},e.name))})},r))}),s.jsxs("div",{className:"flex gap-5 pt-4",children:[s.jsx(h,{type:"button",as:v,isDisabled:i,href:route("dashboard.roles.list"),className:"w-32",children:t("Cancel")}),s.jsx(h,{type:"submit",color:"primary",className:"w-32",isLoading:i,children:t("Save")})]})]})]})}),s.jsx("div",{className:"h-10"})]}),s.jsx("div",{className:"h-20"})]})};L.layout=a=>s.jsx(y,{children:a,pageTitle:String(t("Roles"))});export{L as Page,L as default};
