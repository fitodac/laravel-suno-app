import{q as N,r as l,W as C,y as E,j as r,B as b}from"./app-Xg3MWjUp.js";import{C as k}from"./index-Bf0lN5A-.js";import{t as o}from"./translations-CBxNckOR.js";import{c as w}from"./chunk-6EHM2IL6-CI5cLZtA.js";import{c as S}from"./chunk-KBN3H6OQ-qxOJiocu.js";import{c as D}from"./chunk-3XVMTUU7-Dp_cF4cz.js";import{d as R}from"./chunk-44JHHBS2-BLNJPhDT.js";import{b as g,s as q}from"./chunk-DBLREEYE-kXYMn-PH.js";import"./chunk-NQM3AZQR-DA4sNDJM.js";import"./chunk-XHQUSKIE-BJ4pqTDI.js";import"./chunk-N2KXC5ZE-s7KBEtmC.js";import"./extend-tailwind-merge-DDA0jNcl.js";import"./index-0WiR-nh7.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFocusable-DL-dGcJ1.js";import"./focusSafely-BGz0Gc4B.js";import"./useSyncRef-BzsjkglV.js";import"./useFocus-nnqdAYxR.js";import"./useField-DZWb07f-.js";import"./useLabel-iYy-tCn_.js";import"./useLabels-C083MLIf.js";import"./useFormValidationState-DKcVms6Q.js";import"./VisuallyHidden-DUDGVDCO.js";import"./useToggleState-B8OVgiR9.js";import"./usePress-D8L0wOwc.js";import"./textSelection-CcPLNbaN.js";import"./context-CiZxFy97.js";import"./index-BKmmPl89.js";import"./chunk-CIZQCQPA-C7Ey7jFP.js";import"./chunk-6NL67ZRH-C6QNaIJW.js";const nr=({drawerOpen:j,setDrawerOpen:m,selectedPermission:e,setSelectedPermission:p})=>{const{props:{guards:c}}=N(),u=l.useRef(null);l.useEffect(()=>{setTimeout(()=>{var s;(s=u.current)==null||s.focus()},300)},[j]);const{data:d,post:v,patch:_,errors:t,setData:n,processing:i,clearErrors:f,reset:h}=C({name:"",guard_name:["web"]});l.useEffect(()=>{e!==null&&n({name:e.name,guard_name:e.guard_name.split(",")})},[e]);const x=l.useCallback(()=>{m(!1),h(),p(null),E.reload({only:["permissions"]})},[]),y=s=>{s.preventDefault(),e?_(route("dashboard.permissions.update",{permission:e}),{preserveScroll:!0,onSuccess:a=>{a.props.flash&&a.props.flash.success&&b.success(o(a.props.flash.success)),x()},onError:a=>console.log(a)}):v(route("dashboard.permissions.store"),{preserveScroll:!0,onSuccess:a=>{a.props.flash&&a.props.flash.success&&b.success(o(a.props.flash.success)),x()},onError:a=>console.log(a)})};return r.jsxs("div",{className:D("bg-background border border-divider border-b-none mx-auto relative overflow-hidden","md:w-[600px]","shadow-black/20 rounded-t-xl shadow-xl"),children:[r.jsxs("div",{className:"p-6 lg:px-10",children:[r.jsx("div",{className:"text-lg",children:e?o("Edit permission"):o("Create new permission")}),r.jsx(R,{className:"my-4"}),r.jsxs("form",{onSubmit:y,className:"pb-10 space-y-5",children:[r.jsx("fieldset",{children:r.jsx(k,{isRequired:!0,variant:"faded",ref:u,label:o("Permission name"),value:d.name,isInvalid:!!t.name,errorMessage:t.name,onKeyUp:()=>f("name"),isDisabled:i,onValueChange:s=>n("name",s)})}),r.jsx("fieldset",{children:e?r.jsxs("div",{className:"text-primary text-sm",children:["Guard:"," ",r.jsx("strong",{className:"uppercase",children:e.guard_name})]}):r.jsx(w,{isRequired:!0,label:"Guards",orientation:"horizontal",value:d.guard_name,isInvalid:!!t.guard_name,errorMessage:t.guard_name,isDisabled:i,onValueChange:s=>{n("guard_name",s),f("guard_name")},children:Array.isArray(c)&&c.map(s=>r.jsx(S,{value:s,children:s},s))})}),r.jsxs("div",{className:"flex justify-end gap-5",children:[r.jsx(g,{isDisabled:i,onPress:()=>{m(!1),p(null),h()},className:"w-32",children:o("Cancel")}),r.jsx(g,{type:"submit",color:"primary",className:"w-32",isLoading:i,children:o("Save")})]})]})]}),i&&r.jsx("div",{className:"bg-white/70 inset-0 absolute grid place-content-center z-30 dark:bg-black/80",children:r.jsx(q,{})})]})};export{nr as CreateEditForm};
