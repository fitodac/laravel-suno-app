import{q as N,r as t,W as C,y as E,j as s,B as b}from"./app-BL5MU1ub.js";import{C as k}from"./index-BDdcsGcF.js";import{t as o}from"./translations-gWKnqGb7.js";import{c as w}from"./chunk-6EHM2IL6-CqJ6WQ_Y.js";import{c as S}from"./chunk-KBN3H6OQ-CdYQgtAc.js";import{c as D}from"./chunk-3XVMTUU7-Dp_cF4cz.js";import{d as R}from"./chunk-44JHHBS2-BriGgij3.js";import{b as g,s as q}from"./chunk-DBLREEYE-k5beFU79.js";import"./chunk-NQM3AZQR-LXh0D-Rm.js";import"./chunk-XHQUSKIE-D4as8MM8.js";import"./extend-tailwind-merge-DDA0jNcl.js";import"./index-BKyyixf6.js";import"./useFormValidationState-GSGWOKt_.js";import"./focusSafely-C6wh2g3D.js";import"./useLabels-D90GRlDd.js";import"./VisuallyHidden-8nf4bjXZ.js";import"./useToggleState-dObIv4S-.js";import"./usePress-CYqZ7Kvo.js";import"./index-CsO-F6Sj.js";import"./chunk-6NL67ZRH-Bv4xzwpt.js";const O=({drawerOpen:j,setDrawerOpen:c,selectedPermission:e,setSelectedPermission:m})=>{const{props:{guards:u}}=N(),d=t.useRef(null);t.useEffect(()=>{setTimeout(()=>{var r;(r=d.current)==null||r.focus()},300)},[j]);const{data:p,post:v,patch:_,errors:i,setData:n,processing:l,clearErrors:f,reset:h}=C({name:"",guard_name:["web"]});t.useEffect(()=>{e!==null&&n({name:e.name,guard_name:e.guard_name.split(",")})},[e]);const x=t.useCallback(()=>{c(!1),h(),m(null),E.reload({only:["permissions"]})},[]),y=r=>{r.preventDefault(),e?_(route("dashboard.permissions.update",{permission:e}),{preserveScroll:!0,onSuccess:a=>{a.props.flash&&a.props.flash.success&&b.success(o(a.props.flash.success)),x()},onError:a=>console.log(a)}):v(route("dashboard.permissions.store"),{preserveScroll:!0,onSuccess:a=>{a.props.flash&&a.props.flash.success&&b.success(o(a.props.flash.success)),x()},onError:a=>console.log(a)})};return s.jsxs("div",{className:D("bg-background border border-divider border-b-none mx-auto relative overflow-hidden","md:w-[600px]","shadow-black/20 rounded-t-xl shadow-xl"),children:[s.jsxs("div",{className:"p-6 lg:px-10",children:[s.jsx("div",{className:"text-lg",children:e?o("Edit permission"):o("Create new permission")}),s.jsx(R,{className:"my-4"}),s.jsxs("form",{onSubmit:y,className:"pb-10 space-y-5",children:[s.jsx("fieldset",{children:s.jsx(k,{isRequired:!0,variant:"faded",ref:d,label:o("Permission name"),value:p.name,isInvalid:!!i.name,errorMessage:i.name,onKeyUp:()=>f("name"),isDisabled:l,onValueChange:r=>n("name",r)})}),s.jsx("fieldset",{children:e?s.jsxs("div",{className:"text-primary text-sm",children:["Guard:"," ",s.jsx("strong",{className:"uppercase",children:e.guard_name})]}):s.jsx(w,{isRequired:!0,label:"Guards",orientation:"horizontal",value:p.guard_name,isInvalid:!!i.guard_name,errorMessage:i.guard_name,isDisabled:l,onValueChange:r=>{n("guard_name",r),f("guard_name")},children:Array.isArray(u)&&u.map(r=>s.jsx(S,{value:r,children:r},r))})}),s.jsxs("div",{className:"flex justify-end gap-5",children:[s.jsx(g,{isDisabled:l,onPress:()=>{c(!1),m(null),h()},className:"w-32",children:o("Cancel")}),s.jsx(g,{type:"submit",color:"primary",className:"w-32",isLoading:l,children:o("Save")})]})]})]}),l&&s.jsx("div",{className:"bg-white/70 inset-0 absolute grid place-content-center z-30 dark:bg-black/80",children:s.jsx(q,{})})]})};export{O as CreateEditForm};
