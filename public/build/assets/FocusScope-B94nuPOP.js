import{r as m,R as y}from"./app-Xg3MWjUp.js";import{g as j,u as q,d as N,s as h,h as H}from"./focusSafely-BGz0Gc4B.js";const G=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),W=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function J(e){if(Intl.Locale){let r=new Intl.Locale(e).maximize(),o=typeof r.getTextInfo=="function"?r.getTextInfo():r.textInfo;if(o)return o.direction==="rtl";if(r.script)return G.has(r.script)}let t=e.split("-")[0];return W.has(t)}const Y=Symbol.for("react-aria.i18n.locale");function P(){let e=typeof window<"u"&&window[Y]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:J(e)?"rtl":"ltr"}}let C=P(),S=new Set;function K(){C=P();for(let e of S)e(C)}function Q(){let e=j(),[t,r]=m.useState(C);return m.useEffect(()=>(S.size===0&&window.addEventListener("languagechange",K),S.add(r),()=>{S.delete(r),S.size===0&&window.removeEventListener("languagechange",K)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const X=y.createContext(null);function fe(){let e=Q();return m.useContext(X)||e}function Z(e){const t=q(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:r,visibility:o}=e.style,n=r!=="none"&&o!=="hidden"&&o!=="collapse";if(n){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:u,visibility:i}=a(e);n=u!=="none"&&i!=="hidden"&&i!=="collapse"}return n}function ee(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function V(e,t){return e.nodeName!=="#comment"&&Z(e)&&ee(e,t)&&(!e.parentElement||V(e.parentElement,e))}const z=y.createContext(null),M="react-aria-focus-scope-restore";let f=null;function se(e){let{children:t,contain:r,restoreFocus:o,autoFocus:n}=e,a=m.useRef(null),u=m.useRef(null),i=m.useRef([]),{parentNode:$}=m.useContext(z)||{},l=m.useMemo(()=>new k({scopeRef:i}),[i]);N(()=>{let v=$||b.root;if(b.getTreeNode(v.scopeRef)&&f&&!F(f,v.scopeRef)){let s=b.getTreeNode(f);s&&(v=s)}v.addChild(l),b.addNode(l)},[l,$]),N(()=>{let v=b.getTreeNode(i);v&&(v.contain=!!r)},[r]),N(()=>{var v;let s=(v=a.current)===null||v===void 0?void 0:v.nextSibling,p=[],x=_=>_.stopPropagation();for(;s&&s!==u.current;)p.push(s),s.addEventListener(M,x),s=s.nextSibling;return i.current=p,()=>{for(let _ of p)_.removeEventListener(M,x)}},[t]),ie(i,o,r),oe(i,r),ue(i,o,r),ae(i,n),m.useEffect(()=>{const v=h(i.current?i.current[0]:void 0).activeElement;let s=null;if(E(v,i.current)){for(let p of b.traverse())p.scopeRef&&E(v,p.scopeRef.current)&&(s=p);s===b.getTreeNode(i)&&(f=s.scopeRef)}},[i]),N(()=>()=>{var v,s,p;let x=(p=(s=b.getTreeNode(i))===null||s===void 0||(v=s.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&p!==void 0?p:null;(i===f||F(i,f))&&(!x||b.getTreeNode(x))&&(f=x),b.removeTreeNode(i)},[i]);let c=m.useMemo(()=>te(i),[]),d=m.useMemo(()=>({focusManager:c,parentNode:l}),[l,c]);return y.createElement(z.Provider,{value:d},y.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,y.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:u}))}function te(e){return{focusNext(t={}){let r=e.current,{from:o,tabbable:n,wrap:a,accept:u}=t,i=o||h(r[0]).activeElement,$=r[0].previousElementSibling,l=w(r),c=g(l,{tabbable:n,accept:u},r);c.currentNode=E(i,r)?i:$;let d=c.nextNode();return!d&&a&&(c.currentNode=$,d=c.nextNode()),d&&T(d,!0),d},focusPrevious(t={}){let r=e.current,{from:o,tabbable:n,wrap:a,accept:u}=t,i=o||h(r[0]).activeElement,$=r[r.length-1].nextElementSibling,l=w(r),c=g(l,{tabbable:n,accept:u},r);c.currentNode=E(i,r)?i:$;let d=c.previousNode();return!d&&a&&(c.currentNode=$,d=c.previousNode()),d&&T(d,!0),d},focusFirst(t={}){let r=e.current,{tabbable:o,accept:n}=t,a=w(r),u=g(a,{tabbable:o,accept:n},r);u.currentNode=r[0].previousElementSibling;let i=u.nextNode();return i&&T(i,!0),i},focusLast(t={}){let r=e.current,{tabbable:o,accept:n}=t,a=w(r),u=g(a,{tabbable:o,accept:n},r);u.currentNode=r[r.length-1].nextElementSibling;let i=u.previousNode();return i&&T(i,!0),i}}}const I=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],re=I.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";I.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const ne=I.join(':not([hidden]):not([tabindex="-1"]),');function w(e){return e[0].parentElement}function L(e){let t=b.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function oe(e,t){let r=m.useRef(void 0),o=m.useRef(void 0);N(()=>{let n=e.current;if(!t){o.current&&(cancelAnimationFrame(o.current),o.current=void 0);return}const a=h(n?n[0]:void 0);let u=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!L(e)||l.isComposing)return;let c=a.activeElement,d=e.current;if(!d||!E(c,d))return;let v=w(d),s=g(v,{tabbable:!0},d);if(!c)return;s.currentNode=c;let p=l.shiftKey?s.previousNode():s.nextNode();p||(s.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,p=l.shiftKey?s.previousNode():s.nextNode()),l.preventDefault(),p&&T(p,!0)},i=l=>{(!f||F(f,e))&&E(l.target,e.current)?(f=e,r.current=l.target):L(e)&&!R(l.target,e)?r.current?r.current.focus():f&&f.current&&A(f.current):L(e)&&(r.current=l.target)},$=l=>{o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(a.activeElement&&L(e)&&!R(a.activeElement,e))if(f=e,a.body.contains(l.target)){var c;r.current=l.target,(c=r.current)===null||c===void 0||c.focus()}else f.current&&A(f.current)})};return a.addEventListener("keydown",u,!1),a.addEventListener("focusin",i,!1),n==null||n.forEach(l=>l.addEventListener("focusin",i,!1)),n==null||n.forEach(l=>l.addEventListener("focusout",$,!1)),()=>{a.removeEventListener("keydown",u,!1),a.removeEventListener("focusin",i,!1),n==null||n.forEach(l=>l.removeEventListener("focusin",i,!1)),n==null||n.forEach(l=>l.removeEventListener("focusout",$,!1))}},[e,t]),N(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[o])}function U(e){return R(e)}function E(e,t){return!e||!t?!1:t.some(r=>r.contains(e))}function R(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:r}of b.traverse(b.getTreeNode(t)))if(r&&E(e,r.current))return!0;return!1}function ve(e){return R(e,f)}function F(e,t){var r;let o=(r=b.getTreeNode(t))===null||r===void 0?void 0:r.parent;for(;o;){if(o.scopeRef===e)return!0;o=o.parent}return!1}function T(e,t=!1){if(e!=null&&!t)try{H(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function B(e,t=!0){let r=e[0].previousElementSibling,o=w(e),n=g(o,{tabbable:t},e);n.currentNode=r;let a=n.nextNode();return t&&!a&&(o=w(e),n=g(o,{tabbable:!1},e),n.currentNode=r,a=n.nextNode()),a}function A(e,t=!0){T(B(e,t))}function ae(e,t){const r=y.useRef(t);m.useEffect(()=>{if(r.current){f=e;const o=h(e.current?e.current[0]:void 0);!E(o.activeElement,f.current)&&e.current&&A(e.current)}r.current=!1},[e])}function ie(e,t,r){N(()=>{if(t||r)return;let o=e.current;const n=h(o?o[0]:void 0);let a=u=>{let i=u.target;E(i,e.current)?f=e:U(i)||(f=null)};return n.addEventListener("focusin",a,!1),o==null||o.forEach(u=>u.addEventListener("focusin",a,!1)),()=>{n.removeEventListener("focusin",a,!1),o==null||o.forEach(u=>u.removeEventListener("focusin",a,!1))}},[e,t,r])}function le(e){let t=b.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function ue(e,t,r){const o=m.useRef(typeof document<"u"?h(e.current?e.current[0]:void 0).activeElement:null);N(()=>{let n=e.current;const a=h(n?n[0]:void 0);if(!t||r)return;let u=()=>{(!f||F(f,e))&&E(a.activeElement,e.current)&&(f=e)};return a.addEventListener("focusin",u,!1),n==null||n.forEach(i=>i.addEventListener("focusin",u,!1)),()=>{a.removeEventListener("focusin",u,!1),n==null||n.forEach(i=>i.removeEventListener("focusin",u,!1))}},[e,r]),N(()=>{const n=h(e.current?e.current[0]:void 0);if(!t)return;let a=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!L(e)||u.isComposing)return;let i=n.activeElement;if(!E(i,e.current))return;let $=b.getTreeNode(e);if(!$)return;let l=$.nodeToRestore,c=g(n.body,{tabbable:!0});c.currentNode=i;let d=u.shiftKey?c.previousNode():c.nextNode();if((!l||!n.body.contains(l)||l===n.body)&&(l=void 0,$.nodeToRestore=void 0),(!d||!E(d,e.current))&&l){c.currentNode=l;do d=u.shiftKey?c.previousNode():c.nextNode();while(E(d,e.current));u.preventDefault(),u.stopPropagation(),d?T(d,!0):U(l)?T(l,!0):i.blur()}};return r||n.addEventListener("keydown",a,!0),()=>{r||n.removeEventListener("keydown",a,!0)}},[e,t,r]),N(()=>{const n=h(e.current?e.current[0]:void 0);if(!t)return;let a=b.getTreeNode(e);if(a){var u;return a.nodeToRestore=(u=o.current)!==null&&u!==void 0?u:void 0,()=>{let i=b.getTreeNode(e);if(!i)return;let $=i.nodeToRestore;if(t&&$&&(E(n.activeElement,e.current)||n.activeElement===n.body&&le(e))){let l=b.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let c=l.getTreeNode(e);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected){O(c.nodeToRestore);return}c=c.parent}for(c=l.getTreeNode(e);c;){if(c.scopeRef&&c.scopeRef.current&&b.getTreeNode(c.scopeRef)){let d=B(c.scopeRef.current,!0);O(d);return}c=c.parent}}})}}}},[e,t])}function O(e){e.dispatchEvent(new CustomEvent(M,{bubbles:!0,cancelable:!0}))&&T(e)}function g(e,t,r){let o=t!=null&&t.tabbable?ne:re,n=h(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var u;return!(t==null||(u=t.from)===null||u===void 0)&&u.contains(a)?NodeFilter.FILTER_REJECT:a.matches(o)&&V(a)&&(!r||E(a,r))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(n.currentNode=t.from),n}class D{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,r,o){let n=this.fastMap.get(r??null);if(!n)return;let a=new k({scopeRef:t});n.addChild(a),a.parent=n,this.fastMap.set(t,a),o&&(a.nodeToRestore=o)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let r=this.fastMap.get(t);if(!r)return;let o=r.parent;for(let a of this.traverse())a!==r&&r.nodeToRestore&&a.nodeToRestore&&r.scopeRef&&r.scopeRef.current&&E(a.nodeToRestore,r.scopeRef.current)&&(a.nodeToRestore=r.nodeToRestore);let n=r.children;o&&(o.removeChild(r),n.size>0&&n.forEach(a=>o&&o.addChild(a))),this.fastMap.delete(r.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let r of t.children)yield*this.traverse(r)}clone(){var t;let r=new D;var o;for(let n of this.traverse())r.addTreeNode(n.scopeRef,(o=(t=n.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&o!==void 0?o:null,n.nodeToRestore);return r}constructor(){this.fastMap=new Map,this.root=new k({scopeRef:null}),this.fastMap.set(null,this.root)}}class k{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let b=new D;export{fe as $,g as a,se as b,ve as c};
