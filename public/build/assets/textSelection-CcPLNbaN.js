import{r as a}from"./app-Xg3MWjUp.js";import{A as $,s as m,B as v}from"./focusSafely-BGz0Gc4B.js";function L(){let e=a.useRef(new Map),t=a.useCallback((n,c,l,s)=>{let r=s!=null&&s.once?(...i)=>{e.current.delete(l),l(...i)}:l;e.current.set(l,{type:c,eventTarget:n,fn:r,options:s}),n.addEventListener(c,l,s)},[]),d=a.useCallback((n,c,l,s)=>{var r;let i=((r=e.current.get(l))===null||r===void 0?void 0:r.fn)||l;n.removeEventListener(c,i,s),e.current.delete(l)},[]),b=a.useCallback(()=>{e.current.forEach((n,c)=>{d(n.eventTarget,n.type,c,n.options)})},[d]);return a.useEffect(()=>b,[b]),{addGlobalListener:t,removeGlobalListener:d,removeAllGlobalListeners:b}}let o="default",u="",f=new WeakMap;function S(e){if($()){if(o==="default"){const t=m(e);u=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}o="disabled"}else(e instanceof HTMLElement||e instanceof SVGElement)&&(f.set(e,e.style.userSelect),e.style.userSelect="none")}function y(e){if($()){if(o!=="disabled")return;o="restoring",setTimeout(()=>{v(()=>{if(o==="restoring"){const t=m(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=u||""),u="",o="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&f.has(e)){let t=f.get(e);e.style.userSelect==="none"&&(e.style.userSelect=t),e.getAttribute("style")===""&&e.removeAttribute("style"),f.delete(e)}}export{L as $,y as a,S as b};
