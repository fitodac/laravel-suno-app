import{c as y}from"./FocusScope-B94nuPOP.js";import{r as b}from"./app-Xg3MWjUp.js";import{$ as E}from"./VisuallyHidden-DUDGVDCO.js";import{r as $,s as D,c as h}from"./focusSafely-BGz0Gc4B.js";function I(r){let{ref:t,onInteractOutside:n,isDisabled:p,onInteractOutsideStart:c}=r,g=b.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),o=$(a=>{n&&O(a,t)&&(c&&c(a),g.current.isPointerDown=!0)}),i=$(a=>{n&&n(a)});b.useEffect(()=>{let a=g.current;if(p)return;const v=t.current,s=D(v);if(typeof PointerEvent<"u"){let l=f=>{a.isPointerDown&&O(f,t)&&i(f),a.isPointerDown=!1};return s.addEventListener("pointerdown",o,!0),s.addEventListener("pointerup",l,!0),()=>{s.removeEventListener("pointerdown",o,!0),s.removeEventListener("pointerup",l,!0)}}else{let l=d=>{a.ignoreEmulatedMouseEvents?a.ignoreEmulatedMouseEvents=!1:a.isPointerDown&&O(d,t)&&i(d),a.isPointerDown=!1},f=d=>{a.ignoreEmulatedMouseEvents=!0,a.isPointerDown&&O(d,t)&&i(d),a.isPointerDown=!1};return s.addEventListener("mousedown",o,!0),s.addEventListener("mouseup",l,!0),s.addEventListener("touchstart",o,!0),s.addEventListener("touchend",f,!0),()=>{s.removeEventListener("mousedown",o,!0),s.removeEventListener("mouseup",l,!0),s.removeEventListener("touchstart",o,!0),s.removeEventListener("touchend",f,!0)}}},[t,p,o,i])}function O(r,t){if(r.button>0)return!1;if(r.target){const n=r.target.ownerDocument;if(!n||!n.documentElement.contains(r.target)||r.target.closest("[data-react-aria-top-layer]"))return!1}return t.current&&!t.current.contains(r.target)}const u=[];function S(r,t){let{onClose:n,shouldCloseOnBlur:p,isOpen:c,isDismissable:g=!1,isKeyboardDismissDisabled:o=!1,shouldCloseOnInteractOutside:i}=r;b.useEffect(()=>(c&&u.push(t),()=>{let e=u.indexOf(t);e>=0&&u.splice(e,1)}),[c,t]);let a=()=>{u[u.length-1]===t&&n&&n()},v=e=>{(!i||i(e.target))&&u[u.length-1]===t&&(e.stopPropagation(),e.preventDefault())},s=e=>{(!i||i(e.target))&&(u[u.length-1]===t&&(e.stopPropagation(),e.preventDefault()),a())},l=e=>{e.key==="Escape"&&!o&&!e.nativeEvent.isComposing&&(e.stopPropagation(),e.preventDefault(),a())};I({ref:t,onInteractOutside:g&&c?s:null,onInteractOutsideStart:v});let{focusWithinProps:f}=E({isDisabled:!p,onBlurWithin:e=>{!e.relatedTarget||y(e.relatedTarget)||(!i||i(e.relatedTarget))&&n()}}),d=e=>{e.target===e.currentTarget&&e.preventDefault()};return{overlayProps:{onKeyDown:l,...f},underlayProps:{onPointerDown:d}}}var m={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1],spring:[.155,1.105,.295,1.12],springOut:[.57,-.15,.62,.07],softSpring:[.16,1.11,.3,1.02]},C={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},scale:{enter:{scale:1},exit:{scale:.95}},scaleFadeIn:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.25,ease:m.easeIn}},exit:{transform:"scale(0.95)",opacity:0,transition:{duration:.2,ease:m.easeOut}}},scaleInOut:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.4,ease:m.ease}},exit:{transform:"scale(1.03)",opacity:0,transition:{duration:.3,ease:m.ease}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:m.ease}},exit:{opacity:0,transition:{duration:.3,ease:m.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};function T(r){let[t,n]=h(r.isOpen,r.defaultOpen||!1,r.onOpenChange);const p=b.useCallback(()=>{n(!0)},[n]),c=b.useCallback(()=>{n(!1)},[n]),g=b.useCallback(()=>{n(!t)},[n,t]);return{isOpen:t,setOpen:n,open:p,close:c,toggle:g}}export{S as $,C as T,m as a,T as b};
